---
title: "Prevalence of Norovirus in Portuguese Production Areas"
author: "Luis Oliveira"
date: "13/12/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Norovirus

```{r datamimport}
library(data.table)
library(here)
library(magrittr)
library(knitr)
library(kableExtra)
library(leaflet)
library(sp)

# Read the data
NoV <- fread(here("data", "production_areas.csv"))

# Modify Spatial Data as numeric for Leaftet
NoV[, long:=as.numeric(gsub(",", ".", longitude))]
NoV[, lat:=as.numeric(gsub(",", ".", latitude))]
NoV[, c("longitude", "latitude"):=NULL]

# Modify Dates
NoV[, sampDate:=as.Date(paste0(sampY, "/", sampM, "/", sampD, sep="/"), "%Y/%m/%d")][
    , arrivalDate:=as.Date(paste0(sampY, "/", sampM, "/", arrivalD, sep="/"), "%Y/%m/%d")][
    , analysysDate:=as.Date(paste0(analysisY, "/", analysisM, "/", analysisD, sep="/"), "%Y/%m/%d")]
str(NoV)


# Creates a map with points of lat and long data from NoV
myMap <- leaflet(NoV) %>% addTiles() %>% addCircles(lng = ~long, lat = ~lat)
myMap






```

